From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: sub-kek <subbkek@gmail.com>
Date: Thu, 4 Apr 2024 14:29:42 +0300
Subject: [PATCH] Open some commands to users


diff --git a/src/main/java/io/inkwellmc/inkwell/InkwellConfig.java b/src/main/java/io/inkwellmc/inkwell/InkwellConfig.java
index eae77aecfd17715e2e5ba26e1d1fc81bd6e3051c..3e63370661ccaad57ca86e2b22faa0229e13ba52 100644
--- a/src/main/java/io/inkwellmc/inkwell/InkwellConfig.java
+++ b/src/main/java/io/inkwellmc/inkwell/InkwellConfig.java
@@ -259,11 +259,13 @@ public class InkwellConfig {
     public static int pistonPushLimit;
     public static boolean snowballKnockbackPlayer;
     public static boolean useVanillaEndTeleportation = false;
+    public static boolean registerDeveloperCommands;
     private static void miscSettings() {
         disableOutOfOrderChat = getBoolean("misc.disable-out-of-order-chat", true);
         pistonPushLimit = getInt("misc.piston-push-limit", 12, "The number of blocks the piston can move. The default is 12.");
         snowballKnockbackPlayer = getBoolean("misc.snowball-knockback-player", false, "Value defines can snowball kockback player");
         useVanillaEndTeleportation = getBoolean("misc.vanilla-end-teleportation", useVanillaEndTeleportation, "This can fix wither platform obsidian farm");
+        registerDeveloperCommands = getBoolean("misc.register-developer-commands", false);
     }
 
     public static Map<String, Integer> projectileTimeouts;
diff --git a/src/main/java/net/minecraft/commands/Commands.java b/src/main/java/net/minecraft/commands/Commands.java
index 4f25b35a037e6c697e5e345f38b94a8e4b436ad7..2066fff222f9146ab3e5c7af9857691972a58ae3 100644
--- a/src/main/java/net/minecraft/commands/Commands.java
+++ b/src/main/java/net/minecraft/commands/Commands.java
@@ -163,7 +163,7 @@ public class Commands {
         ClearInventoryCommands.register(this.dispatcher, commandRegistryAccess);
         //CloneCommands.register(this.dispatcher, commandRegistryAccess); // Folia - region threading - TODO
         DamageCommand.register(this.dispatcher, commandRegistryAccess);
-        //DataCommands.register(this.dispatcher); // Folia - region threading - TODO
+        DataCommands.register(this.dispatcher); // Inkwell
         //DataPackCommand.register(this.dispatcher); // Folia - region threading - TODO
         //DebugCommand.register(this.dispatcher); // Folia - region threading - TODO
         DefaultGameModeCommands.register(this.dispatcher);
@@ -194,7 +194,7 @@ public class Commands {
         //ReloadCommand.register(this.dispatcher); // Folia - region threading
         RecipeCommand.register(this.dispatcher);
         //ReturnCommand.register(this.dispatcher); // Folia - region threading - TODO later
-        //RideCommand.register(this.dispatcher); // Folia - region threading - TODO later
+        RideCommand.register(this.dispatcher); // Inkwell
         SayCommand.register(this.dispatcher);
         //ScheduleCommand.register(this.dispatcher); // Folia - region threading
         //ScoreboardCommand.register(this.dispatcher); // Folia - region threading - TODO later
@@ -221,7 +221,7 @@ public class Commands {
             JfrCommand.register(this.dispatcher);
         }
 
-        if (SharedConstants.IS_RUNNING_IN_IDE) {
+        if (SharedConstants.IS_RUNNING_IN_IDE || io.inkwellmc.inkwell.InkwellConfig.registerDeveloperCommands) {
             TestCommand.register(this.dispatcher);
             ResetChunksCommand.register(this.dispatcher);
             RaidCommand.register(this.dispatcher);
